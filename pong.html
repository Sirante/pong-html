<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8" />
</head>

<body>
	<div style="background-color:aqua;width: 790px;height: 60px;border: 5px solid #000">
		<h1 style="text-align: center;padding: 1px;">PONG</h1>
	</div>
	<canvas id="gameCanvas" width="800" height="600">
	</canvas>
	<script>
		var canvas;
		var canvasContext;
		var ballX = gameCanvas.width / 2;
		var ballY = gameCanvas.height / 2;
		var ballSpeedX = 5;
		var ballSpeedY = 4;
		var paddleThiccness = 10;
		var paddleLong = 100;
		var ballRadius = 5;
		var paddlePosX = gameCanvas.width - paddleThiccness;
		var paddlePosY1 = gameCanvas.height / 2 - paddleLong / 2;
		var paddlePosY2 = gameCanvas.height / 2 - paddleLong / 2;
		var enemySpeed = 20;

		function calculateMousePos(evt) {
			var rect = canvas.getBoundingClientRect();
			var root = document.documentElement;
			var mouseX = evt.clientX - rect.left - root.scrollLeft;
			var mouseY = evt.clientY - rect.top - root.scrollTop;
			return {
				x: mouseX,
				y: mouseY
			};
		}

		window.onload = function () {
			canvas = document.getElementById('gameCanvas');
			canvasContext = canvas.getContext('2d');

			var framesPerSecond = 60;
			setInterval(function () {
				moveEverything();
				drawEverything();
			}, 1000 / framesPerSecond);

			canvas.addEventListener('mousemove',
				function (evt) {
					var mousePos = calculateMousePos(evt);
					paddle1Y = mousePos.y - (paddleLong / 2);
				});
		}

		function drawEverything() {

			//draw the background black
			colorRect(0, 0, canvas.width, canvas.height, 'black');

			//draw the white "ball"
			colorBall(ballX, ballY, ballRadius, 'white');


			//right player paddle
			colorRect(0, paddle1Y, paddleThiccness, paddleLong, 'purple');

			//left player paddle
			colorRect(paddlePosX, paddlePosY2, paddleThiccness, paddleLong, 'purple');
		}

		//simplified drawing function
		function colorRect(leftX, topY, width, height, drawColor) {
			canvasContext.fillStyle = drawColor;
			canvasContext.fillRect(leftX, topY, width, height, drawColor);
		}
		//simplified drawing circle function
		function colorBall(coreX, coreY, radius, drawColor) {
			canvasContext.fillStyle = drawColor;
			canvasContext.beginPath();
			canvasContext.arc(coreX, coreY, radius, 0, Math.PI * 2, true, drawColor);
			canvasContext.fill();
		}

		function ballReset() {
			ballSpeedX = -ballSpeedX;
			ballX = canvas.width / 2;
			ballY = canvas.height / 2;
		}

		//magic, adding y movement
		function moveEverything() {
			ballX = ballX + ballSpeedX;
			ballY = ballY + ballSpeedY;
			if (ballX > canvas.width - paddleThiccness - ballRadius) {
				if (ballY > paddlePosY2 &&
					ballY < paddlePosY2 + paddleLong) {
					ballSpeedX = -ballSpeedX;
				}
				else {
					ballReset();
				};
			}
			if (ballX < 0 + paddleThiccness + ballRadius) {
				if (ballY > paddle1Y &&
					ballY < paddle1Y + paddleLong) {
					ballSpeedX = -ballSpeedX;
				}
				else {
					ballReset();
				};
				console.log(ballSpeedX);
			}
			if (ballY > canvas.height - ballRadius) {
				ballSpeedY = -ballSpeedY;
			}
			if (ballY < 0 + ballRadius) {
				ballSpeedY = -ballSpeedY;
			}
			if (ballY > paddlePosY2 + paddleLong / 2) {
				paddlePosY2 = paddlePosY2 + enemySpeed;
			}
			if (ballY < paddlePosY2 + paddleLong / 2) {
				paddlePosY2 = paddlePosY2 - enemySpeed;
			}
		}

		//lets the user changes the ball speed
		function setspeed5() {
			if (ballSpeedX < 0) {
				ballSpeedX = -5;
				console.log(ballSpeedX);
			}
			else {
				ballSpeedX = 5
				console.log(ballSpeedX);
			}

		}
		function setspeed10() {
			if (ballSpeedX < 0) {
				ballSpeedX = -10;
				console.log(ballSpeedX);
			}
			else {
				ballSpeedX = 10;
				console.log(ballSpeedX);
			}
		}
		function setspeed20() {
			if (ballSpeedX < 0) {
				ballSpeedX = -20;
				console.log(ballSpeedX);
			}
			else {
				ballSpeedX = 20
				console.log(ballSpeedX);
			}
		}
		/*function setspeed(elem) {
			console.log(elem.value);
			ballSpeedX = Number(elem.value);
		}*/
	</script>
	<div>
		Ball X Speed
		<br>
		<label for="speed5">
			<input onclick="setspeed5()" id="speed5" value="5" checked type="radio" name="speedx"> 5
		</label>
		<br>
		<label for="speed10">
			<input onclick="setspeed10()" id="speed10" value="10" type="radio" name="speedx"> 10
		</label>
		<br>
		<label for="speed20">
			<input onclick="setspeed20()" id="speed20" value="20" type="radio" name="speedx"> 20
		</label>
	</div>
</body>

</html>